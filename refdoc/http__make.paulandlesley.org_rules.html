<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html><head>
<title>Paul's Rules of Makefiles</title></head>
 <body bgcolor="cornsilk">
<h1>Paul's Rules of Makefiles</h1>

<p> A somewhat tongue-in-cheek title, but this page lists a few very
important rules you should always keep in mind when creating makefiles.
Following these rules will allow your makefiles to be both pithy and
beautiful.  And they will make maintaining and modifying them, and thus
your entire life, a much more pleasant experience.

</p><ol>
<p>
<a name="rule1"><li> <font size="+1">Use GNU <code>make</code>.</font></li></a>

</p><p> Don't hassle with writing portable makefiles, use a portable
<em><code>make</code></em> instead!

</p><p> <a name="rule2"><li> <font size="+1">Every non-<code>.PHONY</code>
rule <strong>must</strong> update a file with the <em>exact</em> name of
its target.</font></li></a>

</p><p> Make sure every command script touches the file "<code>$@</code>"--
not "<code>../$@</code>", or "<code>$(notdir $@)</code>", but
<strong>exactly</strong> <code>$@</code>.  That way you and GNU
<code>make</code> always agree.

</p><p> <a name="rule3"><li> <font size="+1">Life is simplest if the targets
are built in the current working directory.</font></li></a>

</p><p> Use <code>VPATH</code> to locate the sources from the objects
directory, not to locate the objects from the sources directory.

</p><p> <a name="rule4"><li> <font size="+1">Follow the Principle of Least
Repetition.</font></li></a>

</p><p> Try to never write a filename more than once.  Do this through a
combination of make variables, pattern rules, automatic variables, and
GNU <code>make</code> functions.

</p><p> <a name="rule5"><li> <font size="+1">Every non-continued line that
starts with a TAB is part of a command script--and vice versa.</font></li></a>

</p><p> If a non-continued line does not begin with a TAB character, it is
<b>never</b> part of a command script: it is always interpreted as
<code>makefile</code> syntax.  If a non-continued line does begin with a
TAB character, it is <b>always</b> part of a command script: it is never
interpreted as <code>makefile</code> syntax.

</p><p> Continued lines are always of the same type as their predecessor,
regardless of what characters they start with.

</p></ol>

<p> Yes, that's all of them... so far.  It's not that that's all I have
to say on the subject, but coming up with points which are both truly
fundamental and expressible in a succinct rule format, ain't easy.

</p><p> Let me know if you have suggestions.

</p><hr>
<a href="http://www.paulandlesley.org/">Paul D. Smith</a>
<a href="mailto:psmith@gnu.org">&lt;psmith@gnu.org&gt;</a>
<hr>
<img src="http__make.paulandlesley.org_rules_fichiers/Count.gif"><hr>
<i>
<!-- hhmts start -->
Last modified: Sat Nov  2 14:27:29 EST 2002
<!-- hhmts end -->
</i>
<font size="2"></font><p></p><center>
<font size="2">Copyright © 1997,2002 Paul D. Smith --- Verbatim copying and
distribution is permitted in any medium, provided this notice is
preserved.
</font></center>
</body></html>